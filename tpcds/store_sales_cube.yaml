name: ${prefix}store_sales_cube
node_type: cube
description: Store sales analysis cube with key metrics and dimensions
metrics:
  # Base metrics
  - ${prefix}store_revenue
  - ${prefix}store_quantity
  - ${prefix}store_transaction_count
  - ${prefix}store_avg_transaction_value
  - ${prefix}store_unique_customers
  - ${prefix}store_profit
  # Derived ratio metrics
  - ${prefix}store_return_rate
  # Period-over-period metrics
  - ${prefix}store_revenue_yoy
  - ${prefix}store_revenue_yoy_pct_change
  # Trailing metrics
  - ${prefix}store_revenue_trailing_7d
  - ${prefix}store_revenue_trailing_30d
  - ${prefix}store_revenue_trailing_7d_avg
dimensions:
  - ${prefix}product.category
  - ${prefix}product.brand
  - ${prefix}customer_dim.state
  - ${prefix}date.year
  - ${prefix}date.month_of_year
  - ${prefix}date.date
  - ${prefix}store_dim.store_name
