---
weight: 1
title: "Running DJ Locally"
---

## Using Docker Compose

The easiest way to try out DataJunction locally is to use the Docker Compose setup. 
This setup will launch and connect the primary DJ backend, the DJ UI, a reflection service, a query service,
and a JupyterLab instance with a few example notebooks.

1. Clone the DJ repository.

```sh
git clone git@github.com:DataJunction/dj.git
```

2. Change into the `dj/` directory and start the Docker Compose environment with the `demo` profile.

```sh
cd dj/
docker compose --profile demo up
```

3. Check that the following services are accessible:

{{< alert icon="ðŸ‘‰" >}}
The **DJ UI** at [http://localhost:3000](http://localhost:3000), with some example data models pre-loaded.
You may need to login with `dj`/`dj`.
{{< /alert >}}

{{< alert icon="ðŸ‘‰" >}}
The **DJ API** at [http://localhost:8000](http://localhost:8000), with Swagger documentation on 
[http://localhost:8000/docs](http://localhost:8000/docs).
{{< /alert >}}

{{< alert icon="ðŸ‘‰" >}}
A JupyterLab instance at [localhost:8181/lab](http://localhost:8181/lab) and contains examples in the `notebooks/`
directory, such as `Modeling the Roads Example Database.ipynb`.
{{< /alert >}}

## Starting Individual DJ Services

As an alternative to the DJ demo, you can start one or more of the individual services separately and configure them to connect to one another or to other
existing instances. One example of why you may do this is if you're only interested in the SQL generating capabilities, in which case you only need to launch
the main DJ service.

### DataJunction - Docker Compose

To start a DJ instance, clone the DJ repository.

```sh
git clone git@github.com:DataJunction/dj.git
```

Start the docker compose environment.

```sh
docker compose up
```

A DJ server is now available and the API docs can be found at [localhost:8000](http://localhost:8000/docs). You can
ping the `/health/` endpoint to ensure the server is up.

{{< tabs "1" >}}
{{< tab "curl" >}}
```sh
curl "http://localhost:8000/health/" | jq
```
*response*
```json
[
  {
    "name": "database",
    "status": "ok"
  }
]
```
{{< /tab >}}
{{< /tabs >}}

### DataJunction Query Service - Docker Compose

By setting `QUERY_SERVICE` in a DJ instance's configuration, you can connect it to a DJQS instance. Queries generated by the DJ instance
will then be executed by the DJQS instance.

To start a DJQS instance, first clone the DJQS repository.

```sh
git clone git@github.com:DataJunction/djqs.git
```

Start the docker compose environment.

```sh
docker compose up
```

A DJQS server is now available and the API docs can be found at [localhost:8001](http://localhost:8001/docs).

{{< alert icon="ðŸ‘‰" >}}
You only need to launch DJQS if you want to both generate SQL queries **and** execute them to retrieve data. Generating SQL queries is possible by only launching DJ.
{{< /alert >}}
{{< alert icon="ðŸ‘‰" >}}
Although it's interesting to check out the API docs for DJQS, you don't need to call the DJQS API directly--DJ will call DJQS on your behalf. You can see in the [.env](https://github.com/DataJunction/dj/blob/main/.docker-env/.env#L6) file that the local DJ setup is by default configured to connect to a local DJQS instance running on port 8001.
{{< /alert >}}

### Example Notebooks

The DJ repository includes notebooks that each contain examples of different ways you can use a DJ server. Once you have DJ running, you can launch a python notebook server
to try them out. If you already have a remote DJ server running, you can connect the example notebooks to it simply by changing the `DJ_HOST`, `DJ_PORT` and `DJ_PROTOCOL`
variables at the top of each notebook.

Clone the DJ demo repository.
```sh
git clone git@github.com:DataJunction/dj-demo.git
```

Install jupyter lab.
```sh
pip install jupyterlab
```

Change into the notebooks directory and start a jupyter server.
```sh
cd notebooks
jupyter lab
```
